package book.rating;

import java.util.Scanner;

public class BookRating {

    private String pBook;
    private int pRate;
    private int pNOfR;
    private double pRateAvg; 

    private BookRating (String pBook, int pRate, int pNOfR, double pRateAvg) {
    
        this.pBook = pBook;
        this.pRate = pRate;
        this.pNOfR = pNOfR;
        this.pRateAvg = pRateAvg;
        int rating = 0;

        if (pRate == 0 || pRate < 0) {
            System.out.println("Sorry, but the number you have entered is too low.\nPlease try again later.");
        }else if (pRate > 0 && pRate < 6) {
            pNOfR++;
            
            rating += pRate;

            pRateAvg = (double)rating/pNOfR;

            System.out.println("Your rating for \"" + pBook + "\" is: " + pRate + "\n");

            System.out.println("Now \"" + pBook + "\" has a rating of " + pRateAvg + " out of " + pNOfR + " rating(s).");
        }else {
            System.out.println("Sorry, but the number you have entered is too high.\nPlease try again later.");
        }
    }

    public static class Numbers {
    
        private String pBook;
        private int pRate;
        private int pNOfR;
        private double pRateAvg;

        public Numbers setpBook (String pBook) {
            this.pBook = pBook;
            return this;
        }
        public Numbers setpRate(int pRate) {
            this.pRate = pRate;
            return this;
        }
        public Numbers setpNOfR (int pNOfR) {
            this.pNOfR = pNOfR;
            return this;
        }
        public Numbers setpRateAvg (double pRateAvg) {
            this.pRateAvg = pRateAvg;
            return this;
        }
        public BookRating build() {
            return new BookRating(pBook, pRate, pNOfR, pRateAvg);
        }
    }


    public static void main(String[] args) {

        Scanner scan = new Scanner(System.in);
        int rating = 0;
        int numOfRates = 0;
        double rateAvg = 0;

        System.out.println("What book would you like to rate?\n");
        
        String bookTitle = scan.nextLine();

        System.out.println("");
     
        System.out.println("What would you rate \"" + bookTitle + "\"?\n(Please enter a whole number between 1 and 10)\n");
        
        int userRate = scan.nextInt();

        System.out.println("");

        BookRating.Numbers num = new BookRating.Numbers();
            BookRating bR = num
              .setpBook(bookTitle)
              .setpRate(userRate)
              .setpNOfR(numOfRates)
              .setpRateAvg(rateAvg)
              .build();
    }
}
